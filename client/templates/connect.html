<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect to Chat Server</title>
    <script>
        // Function to set cookies
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        // Function to get cookie by name
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Submit form and save nickname and server in cookies
        function connectToChat() {
            const nickname = document.getElementById('nickname').value;
            const server = document.getElementById('server').value;

            // Store in cookies for 1 day
            setCookie('nickname', nickname, 1);
            setCookie('server', server, 1);

            // Redirect to /chat
            window.location.href = '/chat';
        }
    </script>

    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
</head>

<body>
    <div class="container section">
        <h1 class="title">Connect to Chat</h1>
        <form onsubmit="connectToChat(); return false;">
            <div class="field">
                <label class="label" for="nickname">Nickname:</label>
                <div class="control">
                    <input class="input" type="text" id="nickname" required>
                </div>
            </div>

            <div class="field">
                <label class="label" for="server">Server IP:</label>
                <div class="control">
                    <input class="input" type="text" id="server" required>
                </div>
            </div>

            <div class="control">
                <button class="button is-primary" type="submit">Connect</button>
            </div>
        </form>
    </div>
</body>

</html>
